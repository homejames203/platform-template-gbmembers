<tree schema_version="1.0">
    <sourceName>-</sourceName>
    <sourceGroup>-</sourceGroup>
    <definitionId>routine_kd_add_submission_discussion_message_v2</definitionId>
    <type>Global Routine</type>
    <status>Active</status>
    <taskTree builder_version="" schema_version="1.0" version="">
        <name>Add Submission Discussion Message v2</name>
        <author></author>
        <notes></notes>
        <lastID>44</lastID>
        <taskDefinition id="routine_kd_add_submission_discussion_message_v2" name="Add Submission Discussion Message v2" schema_version="1.0" version="1">
            <visible>false</visible>
            <deferrable>true</deferrable>
            <parameters>
                <parameter id="Space Slug" label="Space Slug" required="false" tooltip="The Slug of the Space this submission belongs to"></parameter>
                <parameter id="Submission Id" label="Submission Id" required="true" tooltip="Id of the Submission to add a message to"></parameter>
                <parameter id="Message" label="Message" required="true" tooltip="Discussion Message to create for the given submission"></parameter>
                <parameter id="Discussion Label" label="Discussion Label" required="false" tooltip="Label Tag added to discussion if being created via this process">View Task</parameter>
            </parameters>
            <handler name="system_tree_call" version="1"></handler>
            <results format="xml"></results>
        </taskDefinition>
        <request>
            <task definition_id="system_start_v1" id="start" name="Start" x="242" y="-31">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages></messages>
                <dependents>
                    <task label="" type="Complete" value="">routine_kinetic_request_ce_cascading_attribute_retrieve_v1_43</task>
                </dependents>
            </task>
            <task definition_id="kinetic_request_ce_submission_get_answers_v1" id="kinetic_request_ce_submission_get_answers_v1_2" name="Get Submission Answers" x="244" y="105">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="error_handling" label="Error Handling" menu="Error Message,Raise Error" required="true" tooltip="Determine what to return if an error is encountered.">Error Message</parameter>
                    <parameter id="space_slug" label="Space Slug" menu="" required="false" tooltip="The Space the submission is being retrieved from.">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="submission_id" label="Submission ID" menu="" required="true" tooltip="The id of the submission to retrieve answers for.">&lt;%=@inputs['Submission Id']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="No Discussion" type="Complete" value="!@results['Get Submission Answers'].has_key?('Discussion Id') || @results['Get Submission Answers']['Discussion Id'].to_s.empty?">routine_kinetic_request_ce_submission_retrieve_v1_7</task>
                    <task label="Has Discussion" type="Complete" value="@results['Get Submission Answers'].has_key?('Discussion Id') &amp;&amp; !@results['Get Submission Answers']['Discussion Id'].to_s.empty?">routine_kinetic_discussion_issue_message_create_v2_35</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_request_ce_form_retrieve_v1" id="routine_kinetic_request_ce_form_retrieve_v1_6" name="Get Form" x="66" y="209">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space in which the form exists">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Kapp Slug" label="Kapp Slug" menu="" required="true" tooltip="Slug of the kapp in which the form exists">&lt;%=@results['Get Submission']['Kapp Slug']%&gt;</parameter>
                    <parameter id="Form Slug" label="Form Slug" menu="" required="true" tooltip="Slug of the form to retrieve">&lt;%=@results['Get Submission']['Form Slug']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Has Discussion Id Field" type="Complete" value="JSON.parse(@results['Get Form']['Fields']).include?('Discussion Id')">kinetic_request_ce_cascading_attribute_value_retrieve_v1_26</task>
                    <task label="No Discussion Id Field" type="Complete" value="!(JSON.parse(@results['Get Form']['Fields']).include?('Discussion Id'))">system_join_v1_41</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_request_ce_submission_retrieve_v1" id="routine_kinetic_request_ce_submission_retrieve_v1_7" name="Get Submission" x="66" y="121">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space to find the submission in">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="Id of the submission to retrieve">&lt;%=@inputs['Submission Id']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Not Closed" type="Complete" value="@results['Get Submission']['Core State'] != &quot;Closed&quot;">routine_kinetic_request_ce_form_retrieve_v1_6</task>
                    <task label="Closed" type="Complete" value="@results['Get Submission']['Core State'] == &quot;Closed&quot;">system_join_v1_41</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_request_ce_submission_update_v1" id="routine_kinetic_request_ce_submission_update_v1_9" name="Update Submission with Discussion Id" x="374" y="517">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space where the submission exists">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="Id of the submission to update">&lt;%=@inputs['Submission Id']%&gt;</parameter>
                    <parameter id="State" label="State" menu="" required="false" tooltip="Sets the submission state"></parameter>
                    <parameter id="Values" label="Values" menu="" required="false" tooltip="JSON object of the form values to be pre-populated">&lt;%={
  "Discussion Id" =&gt; @results['Create Discussion']['Discussion Id']
}.to_json%&gt;</parameter>
                    <parameter id="Current Page Name" label="Current Page Name" menu="" required="false" tooltip="Name of the Page the Submission to Open to"></parameter>
                    <parameter id="Current Page Navigation" label="Current Page Navigation" menu="" required="false" tooltip="Sets the current page navigation"></parameter>
                    <parameter id="Origin Id" label="Origin Id" menu="" required="false" tooltip="Sets the Origin Id"></parameter>
                    <parameter id="Parent Id" label="Parent Id" menu="" required="false" tooltip="Sets the Parent Id"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">routine_kinetic_discussion_issue_message_create_v2_37</task>
                </dependents>
            </task>
            <task definition_id="system_tree_return_v1" id="system_tree_return_v1_10" name="Return" x="1248" y="176">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents></dependents>
            </task>
            <task definition_id="utility_json_to_xml_v1" id="utility_json_to_xml_v1_12" name="Members to XML" x="871" y="567">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="json" label="JSON" menu="" required="true" tooltip="The JSON String to be converted to XML">&lt;%=@results['Get Team Members']['Membership JSON']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_loop_head_v1_16</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_request_ce_user_retrieve_v1" id="routine_kinetic_request_ce_user_retrieve_v1_14" name="Retrieve User" x="880" y="177">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space in which the user exists">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Username" label="Username" menu="" required="true" tooltip="Username of the user to retrieve">&lt;%=@results['Get Submission Answers']['Assigned Individual']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="User Exists" type="Complete" value="@results['Retrieve User']['Exists'] == &quot;true&quot;">routine_kinetic_discussion_issue_invite_v2_39</task>
                </dependents>
            </task>
            <task definition_id="system_loop_head_v1" id="system_loop_head_v1_16" name="Loop Head" x="1080" y="580">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="data_source" label="Data Source:" menu="" required="true" tooltip="The source that contains the data to use to create each task in the loop.">&lt;%=@results['Members to XML']['XML']%&gt;</parameter>
                    <parameter id="loop_path" label="Loop Path:" menu="" required="true" tooltip="The XPath statement to indicate what data records to process.">//node/node/node</parameter>
                    <parameter id="var_name" label="Variable Name:" menu="" required="false" tooltip="The local variable name used to represent the data used in loop tasks.">username</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_loop_tail_v1_17</task>
                    <task label="" type="Complete" value="">routine_kinetic_request_ce_user_retrieve_v1_23</task>
                </dependents>
            </task>
            <task definition_id="system_loop_tail_v1" id="system_loop_tail_v1_17" name="Loop Tail" x="1246" y="496">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="type" label="Type:" menu="All,Some,Any" required="true" tooltip="How many loop processes must be completed before continuing?">All</parameter>
                    <parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_tree_return_v1_10</task>
                </dependents>
            </task>
            <task definition_id="utilities_echo_v1" id="utilities_echo_v1_20" name="Discussion Id" x="704" y="299">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="input" label="Input" menu="" required="true" tooltip="">&lt;%=@results.has_key?('Create Discussion') ? @results['Create Discussion']['Discussion Id'] : @results['Get Submission Answers']['Discussion Id']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Assigned Individual" type="Complete" value="@results['Get Submission Answers'].has_key?('Assigned Individual') &amp;&amp; !@results['Get Submission Answers']['Assigned Individual'].to_s.empty?">routine_kinetic_request_ce_user_retrieve_v1_14</task>
                    <task label="Has Assigned Team" type="Complete" value="@results['Get Submission Answers'].has_key?('Assigned Team') &amp;&amp; !@results['Get Submission Answers']['Assigned Team'].to_s.empty? &amp;&amp; ((@results['Get Submission Answers'].has_key?('Assigned Individual') &amp;&amp; @results['Get Submission Answers']['Assigned Individual'].to_s.empty?) || !@results['Get Submission Answers'].has_key?('Assigned Individual'))">routine_kinetic_request_ce_team_retrieve_v2_38</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_request_ce_user_retrieve_v1" id="routine_kinetic_request_ce_user_retrieve_v1_23" name="Retrieve Member" x="1225" y="660">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space in which the user exists">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Username" label="Username" menu="" required="true" tooltip="Username of the user to retrieve">&lt;%= @username %&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Doesn't Exist" type="Complete" value="@results['Retrieve Member']['Exists'] != &quot;true&quot;">system_join_v1_24</task>
                    <task label="Exists" type="Complete" value="@results['Retrieve Member']['Exists'] == &quot;true&quot;">routine_kinetic_discussion_issue_invite_v2_40</task>
                </dependents>
            </task>
            <task definition_id="system_join_v1" id="system_join_v1_24" name="Join" x="1463" y="527">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="type" label="Type:" menu="All,Any,Some" required="true" tooltip="How many dependents must be completed before continuing?">Any</parameter>
                    <parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_loop_tail_v1_17</task>
                </dependents>
            </task>
            <task definition_id="utilities_echo_v1" id="utilities_echo_v1_25" name="Build Url" x="67" y="550">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="input" label="Input" menu="" required="true" tooltip="">&lt;%=
url = "#{@results['Web Server Url']['Value']}/#{@results['Get Space']['Slug']}/#{@results['Get Submission']['Kapp Slug']}"
if @results['Get Submission']['Kapp Slug'] == @results['Queue Kapp Slug']['Value']
  url = "#{url}#/queue/filter/__show__/Open/details/#{@inputs['Submission Id']}/summary"
else
  url = "#{url}?page=submission&amp;id=#{@inputs['Submission Id']}"
end
url %&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">routine_kinetic_discussion_issue_create_v2_36</task>
                </dependents>
            </task>
            <task definition_id="kinetic_request_ce_cascading_attribute_value_retrieve_v1" id="kinetic_request_ce_cascading_attribute_value_retrieve_v1_26" name="Queue Kapp Slug" x="66" y="307">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="error_handling" label="Error Handling" menu="Error Message,Raise Error" required="true" tooltip="Determine what to return if an error is encountered.">Error Message</parameter>
                    <parameter id="start_context" label="Start Context" menu="Submission,Form,Kapp,Space" required="true" tooltip="The lowest level to search. If Submission, only a Submission Id is needed">Space</parameter>
                    <parameter id="end_context" label="End Context" menu="Space,Kapp,Form,Submission" required="true" tooltip="The highest level to search. If Submission, only a Submission Id is needed">Space</parameter>
                    <parameter id="prop_to_find" label="Property To Find" menu="" required="true" tooltip="The Name of the Field/Attribute to search for a match.">Queue Kapp Slug</parameter>
                    <parameter id="backup_if_none" label="Backup Value" menu="" required="false" tooltip="If no Field/Attribute value is returned, use this value">queue</parameter>
                    <parameter id="space_slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the space to find attribute values in.">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="kapp_slug" label="Kapp Slug" menu="" required="false" tooltip="The Slug of the kapp to find attribute values in."></parameter>
                    <parameter id="form_slug" label="Form Slug" menu="" required="false" tooltip="The Slug of the form to find attribute values in."></parameter>
                    <parameter id="submission_id" label="Submission Id" menu="" required="false" tooltip="The id of the submission to find values in"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">kinetic_request_ce_cascading_attribute_value_retrieve_v1_27</task>
                </dependents>
            </task>
            <task definition_id="kinetic_request_ce_cascading_attribute_value_retrieve_v1" id="kinetic_request_ce_cascading_attribute_value_retrieve_v1_27" name="Web Server Url" x="66" y="388">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="error_handling" label="Error Handling" menu="Error Message,Raise Error" required="true" tooltip="Determine what to return if an error is encountered.">Error Message</parameter>
                    <parameter id="start_context" label="Start Context" menu="Submission,Form,Kapp,Space" required="true" tooltip="The lowest level to search. If Submission, only a Submission Id is needed">Space</parameter>
                    <parameter id="end_context" label="End Context" menu="Space,Kapp,Form,Submission" required="true" tooltip="The highest level to search. If Submission, only a Submission Id is needed">Space</parameter>
                    <parameter id="prop_to_find" label="Property To Find" menu="" required="true" tooltip="The Name of the Field/Attribute to search for a match.">Web Server Url</parameter>
                    <parameter id="backup_if_none" label="Backup Value" menu="" required="false" tooltip="If no Field/Attribute value is returned, use this value">https://kinops.io</parameter>
                    <parameter id="space_slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the space to find attribute values in.">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="kapp_slug" label="Kapp Slug" menu="" required="false" tooltip="The Slug of the kapp to find attribute values in."></parameter>
                    <parameter id="form_slug" label="Form Slug" menu="" required="false" tooltip="The Slug of the form to find attribute values in."></parameter>
                    <parameter id="submission_id" label="Submission Id" menu="" required="false" tooltip="The id of the submission to find values in"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">routine_kinetic_request_ce_space_retrieve_v1_28</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_request_ce_space_retrieve_v1" id="routine_kinetic_request_ce_space_retrieve_v1_28" name="Get Space" x="67" y="471">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space to retrieve">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">utilities_echo_v1_25</task>
                </dependents>
            </task>
            <task definition_id="system_tree_return_v1" id="system_tree_return_v1_31" name="Return - No Discussion Created" x="254" y="387">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents></dependents>
            </task>
            <task definition_id="routine_kinetic_discussion_issue_message_create_v2" id="routine_kinetic_discussion_issue_message_create_v2_35" name="Create Discussion Message - Existing Discussion" x="539" y="99">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Discussion Id" label="Discussion Id" menu="" required="true" tooltip="The Id of the Discussion to create a message in">&lt;%= @results['Get Submission Answers']['Discussion Id'] %&gt;</parameter>
                    <parameter id="Message" label="Message" menu="" required="true" tooltip="Message to create within the given discussion">&lt;%=@inputs['Message']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_42</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_discussion_issue_create_v2" id="routine_kinetic_discussion_issue_create_v2_36" name="Create Discussion" x="220" y="539">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Name" label="Name" menu="" required="true" tooltip="Discussion Name">&lt;%=@results['Get Submission']['Label']%&gt;</parameter>
                    <parameter id="Description" label="Description" menu="" required="false" tooltip="Discussion Description">&lt;%=@results['Get Submission']['Label']%&gt;</parameter>
                    <parameter id="Tag List" label="Tag List" menu="" required="false" tooltip="Comma separated list of tags to be applied to this issue">META:TYPE:Queue Task,META:ID:&lt;%=@inputs['Submission Id']%&gt;,META:LABEL:&lt;%=@inputs['Discussion Label']%&gt;,META:URL:&lt;%=@results['Build Url']['output']%&gt;</parameter>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this response belongs to">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">routine_kinetic_request_ce_submission_update_v1_9</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_discussion_issue_message_create_v2" id="routine_kinetic_discussion_issue_message_create_v2_37" name="Create Discussion Message - New Discussion" x="539" y="517">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Discussion Id" label="Discussion Id" menu="" required="true" tooltip="The Id of the Discussion to create a message in">&lt;%=@results['Create Discussion']['Discussion Id']%&gt;</parameter>
                    <parameter id="Message" label="Message" menu="" required="true" tooltip="Message to create within the given discussion">&lt;%=@inputs['Message']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_42</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_request_ce_team_retrieve_v2" id="routine_kinetic_request_ce_team_retrieve_v2_38" name="Get Team Members" x="860" y="429">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Team Name" label="Team Name" menu="" required="true" tooltip="Name of the Team to Retrieve">&lt;%=@results['Get Submission Answers']['Assigned Team']%&gt;</parameter>
                    <parameter id="Return Attributes" label="Return Attributes" menu="" required="false" tooltip="If the function needs to return the teams attributes">false</parameter>
                    <parameter id="Return Members" label="Return Members" menu="" required="false" tooltip="If the function needs to return the teams members">true</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Team Exists" type="Complete" value="@results['Get Team Members']['Exists'] == &quot;true&quot;">utility_json_to_xml_v1_12</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_discussion_issue_invite_v2" id="routine_kinetic_discussion_issue_invite_v2_39" name="Invite Individual" x="1067" y="154">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Username" label="Username" menu="" required="true" tooltip="Username of the User to Invite">&lt;%=@results['Retrieve User']['Username']%&gt;</parameter>
                    <parameter id="Discussion Id" label="Discussion Id" menu="" required="true" tooltip="Id of the Discussion to invite the given user to">&lt;%=@results['Discussion Id']['output']%&gt;</parameter>
                    <parameter id="Suppress Email" label="Suppress Email" menu="" required="false" tooltip="When true, will create the invite to associate the user to the discussion, but will not send an email.">true</parameter>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this response belongs to">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_tree_return_v1_10</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_discussion_issue_invite_v2" id="routine_kinetic_discussion_issue_invite_v2_40" name="Invite Team Member" x="1452" y="667">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Username" label="Username" menu="" required="true" tooltip="Username of the User to Invite">&lt;%=@results['Retrieve Member']['Username']%&gt;</parameter>
                    <parameter id="Discussion Id" label="Discussion Id" menu="" required="true" tooltip="Id of the Discussion to invite the given user to">&lt;%=@results['Discussion Id']['output']%&gt;</parameter>
                    <parameter id="Suppress Email" label="Suppress Email" menu="" required="false" tooltip="When true, will create the invite to associate the user to the discussion, but will not send an email.">true</parameter>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this response belongs to">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_24</task>
                </dependents>
            </task>
            <task definition_id="system_join_v1" id="system_join_v1_41" name="join - not applicable" x="249" y="291">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="type" label="Type:" menu="All,Any,Some" required="true" tooltip="How many dependents must be completed before continuing?">Any</parameter>
                    <parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_tree_return_v1_31</task>
                </dependents>
            </task>
            <task definition_id="system_join_v1" id="system_join_v1_42" name="join - discussion exists" x="539" y="287">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="type" label="Type:" menu="All,Any,Some" required="true" tooltip="How many dependents must be completed before continuing?">Any</parameter>
                    <parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">utilities_echo_v1_20</task>
                </dependents>
            </task>
            <task definition_id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1" id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1_43" name="Discussion Server Url" x="242" y="23">
                <version>1</version>
                <configured>true</configured>
                <defers>true</defers>
                <deferrable>true</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="Space Slug" label="Space Slug" menu="" required="true" tooltip="Slug of the space to create the submission in">&lt;%=@inputs['Space Slug']%&gt;</parameter>
                    <parameter id="Kapp Slug" label="Kapp Slug" menu="" required="false" tooltip="Slug of the kapp to create the submission in"></parameter>
                    <parameter id="Form Slug" label="Form Slug" menu="" required="false" tooltip="Slug of the form to create the submission in"></parameter>
                    <parameter id="Start Context" label="Start Context" menu="" required="true" tooltip="Lowest level to search for attribute">Space</parameter>
                    <parameter id="End Context" label="End Context" menu="" required="true" tooltip="Highest Level to search for attribute">Space</parameter>
                    <parameter id="Property to Find" label="Property to Find" menu="" required="true" tooltip="Name of the attribute to retrieve">Discussion Server Url</parameter>
                    <parameter id="Backup Value" label="Backup Value" menu="" required="false" tooltip="If no value is found, what to use"></parameter>
                    <parameter id="Submission Id" label="Submission Id" menu="" required="false" tooltip="Submission Id, only needed if searching for submission level"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Has Discussion Server" type="Complete" value="!@results['Discussion Server Url']['Value'].to_s.empty?">kinetic_request_ce_submission_get_answers_v1_2</task>
                    <task label="No Discussion Server" type="Complete" value="@results['Discussion Server Url']['Value'].to_s.empty?">system_tree_return_v1_44</task>
                </dependents>
            </task>
            <task definition_id="system_tree_return_v1" id="system_tree_return_v1_44" name="Return - No Discussion Server" x="466" y="12">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents></dependents>
            </task>
        </request>
    </taskTree>
</tree>