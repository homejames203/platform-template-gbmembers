<tree schema_version="1.0">
    <sourceName>Kinetic Request CE</sourceName>
    <sourceGroup>Forms > services</sourceGroup>
    <type>Tree</type>
    <status>Active</status>
    <taskTree builder_version="" schema_version="1.0" version="">
        <name>Created</name>
        <author></author>
        <notes></notes>
        <lastID>45</lastID>
        <request>
            <task definition_id="system_start_v1" id="start" name="Start" x="297" y="-89">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages></messages>
                <dependents>
                    <task label="" type="Complete" value="">utilities_echo_v1_8</task>
                </dependents>
            </task>
            <task definition_id="kinetic_task_tree_create_v1" id="kinetic_task_tree_create_v1_4" name="Create Tree for Other Action" x="850" y="674">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="error_handling" label="Error Handling" menu="Error Message,Raise Error" required="true" tooltip="Determine what to return if an error is encountered.">Error Message</parameter>
                    <parameter id="source" label="Source" menu="" required="true" tooltip="The source for the tree you want to run.">&lt;%= @space_attributes['Task Source Name']%&gt;</parameter>
                    <parameter id="group" label="Group" menu="" required="true" tooltip="The group of the tree you want to run.">Submissions &lt;%= @kapp['Slug']%&gt; &gt; &lt;%= @form['Slug']%&gt;</parameter>
                    <parameter id="body" label="Body" menu="" required="false" tooltip="A valid xml tree definition">&lt;tree schema_version="1.0"&gt;
&lt;sourceName&gt;Kinetic Request CE&lt;/sourceName&gt;
&lt;sourceGroup&gt;Submissions &gt; &lt;%=@kapp['Slug']%&gt; &gt; &lt;%=@form['Slug']%&gt;&lt;/sourceGroup&gt;
&lt;type&gt;Tree&lt;/type&gt;
&lt;status&gt;Active&lt;/status&gt;
&lt;taskTree schema_version="1.0" version=""&gt;
    &lt;name&gt;&lt;%=@results['Submission Actions Loop Begin']['Value']%&gt;&lt;/name&gt;
    &lt;author/&gt;
    &lt;notes/&gt;
    &lt;lastID&gt;0&lt;/lastID&gt;
    &lt;request&gt;
        &lt;task definition_id="system_start_v1" id="start" name="Start" x="10" y="10"&gt;
            &lt;version&gt;1&lt;/version&gt;
            &lt;configured&gt;true&lt;/configured&gt;
            &lt;defers&gt;false&lt;/defers&gt;
            &lt;deferrable&gt;false&lt;/deferrable&gt;
            &lt;visible&gt;false&lt;/visible&gt;
            &lt;parameters/&gt;
            &lt;messages/&gt;
            &lt;dependents/&gt;
        &lt;/task&gt;
    &lt;/request&gt;
&lt;/taskTree&gt;&lt;/tree&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_22</task>
                </dependents>
            </task>
            <task definition_id="kinetic_task_tree_find_by_name_v1" id="kinetic_task_tree_find_by_name_v1_7" name="Check Validity of Tree" x="1063" y="439">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="error_handling" label="Error Handling" menu="Error Message,Raise Error" required="true" tooltip="Determine what to return if an error is encountered.">Error Message</parameter>
                    <parameter id="source" label="Source" menu="" required="true" tooltip="The source for the tree you want to find.">&lt;%= @space_attributes['Task Source Name']%&gt;</parameter>
                    <parameter id="group" label="Group" menu="" required="true" tooltip="The group of the tree you want to find.">Submissions &gt; &lt;%= @kapp['Slug']%&gt; &gt; &lt;%= @form['Slug']%&gt;</parameter>
                    <parameter id="name" label="Name" menu="" required="true" tooltip="Name of tree to find (e.g. Completed)">&lt;%=@results['Submission Action']['output']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Not Exists" type="Complete" value="@results['Check Validity of Tree']['Exists'].to_s.downcase != &quot;true&quot;">system_noop_v1_35</task>
                    <task label="Exists" type="Complete" value="@results['Check Validity of Tree']['Exists'].to_s.downcase == &quot;true&quot;">system_noop_v1_42</task>
                </dependents>
            </task>
            <task definition_id="utilities_echo_v1" id="utilities_echo_v1_8" name="Is Shared Engine" x="297" y="-23">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="input" label="Input" menu="" required="true" tooltip="">&lt;%= ['true','yes'].include?(@space_attributes['Shared Workflow Engine'].to_s.downcase) ||
@space_attributes['Task Server Space Slug'] == 'shared' %&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Shared Task Engine" type="Complete" value="['true','yes'].include?(@results['Is Shared Engine']['output'].to_s.downcase)">system_noop_v1_13</task>
                    <task label="Dedicated Task Engine" type="Complete" value="!['true','yes'].include?(@results['Is Shared Engine']['output'].to_s.downcase)">system_noop_v1_17</task>
                </dependents>
            </task>
            <task definition_id="system_noop_v1" id="system_noop_v1_13" name="Do Nothing - Shared" x="114" y="88">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_junction_v1_45</task>
                </dependents>
            </task>
            <task definition_id="system_noop_v1" id="system_noop_v1_17" name="Dedicated Task Engine" x="297" y="89">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">utilities_echo_v1_26</task>
                </dependents>
            </task>
            <task definition_id="system_join_v1" id="system_join_v1_22" name="Dedicated Branch Complete" x="691" y="566">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="type" label="Type:" menu="All,Any,Some" required="true" tooltip="How many dependents must be completed before continuing?">Any</parameter>
                    <parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_34</task>
                </dependents>
            </task>
            <task definition_id="system_noop_v1" id="system_noop_v1_24" name="Complete" x="109" y="528">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents></dependents>
            </task>
            <task definition_id="utilities_echo_v1" id="utilities_echo_v1_26" name="Raw Workflow Processes" x="297" y="184">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="input" label="Input" menu="" required="true" tooltip="">&lt;%= 
# Type of event this tree expects
event_type = 'Form'
# Name of the attribute
attribute_name = 'Submission Workflow'

# Returns an array of unique attribute values
def action_values(attributes, attribute_name)
    (attributes.has_key?(attribute_name) ? 
        attributes[attribute_name] : 
        []
    ).uniq
end

# Declare the default return variable
values = ['Closed - False', 'Created - False', 'Deleted - False', 'Updated - False', 'Submitted - False']
# Check attributes
if @event['Type'] == event_type
    # Check the form for custom processes
    values = action_values(@form_attributes, attribute_name)
    # If no values were present, default to 'False'
    values = ['Closed - False', 'Created - False', 'Deleted - False', 'Updated - False', 'Submitted - False'] if values.size == 0
end
# return the values as json
values.to_json
%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_loop_head_v1_27</task>
                </dependents>
            </task>
            <task definition_id="system_loop_head_v1" id="system_loop_head_v1_27" name="Submission Actions Loop Begin" x="297" y="338">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="data_source" label="Data Source:" menu="" required="true" tooltip="The source that contains the data to use to create each task in the loop.">&lt;actions&gt;
  &lt;action&gt;Closed&lt;/action&gt;
  &lt;action&gt;Created&lt;/action&gt;
  &lt;action&gt;Deleted&lt;/action&gt;
  &lt;action&gt;Submitted&lt;/action&gt;
  &lt;action&gt;Updated&lt;/action&gt;
&lt;/actions&gt;</parameter>
                    <parameter id="loop_path" label="Loop Path:" menu="" required="true" tooltip="The XPath statement to indicate what data records to process.">/actions/action</parameter>
                    <parameter id="var_name" label="Variable Name:" menu="" required="false" tooltip="The local variable name used to represent the data used in loop tasks."></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_loop_tail_v1_28</task>
                    <task label="" type="Complete" value="">utilities_echo_v1_29</task>
                </dependents>
            </task>
            <task definition_id="system_loop_tail_v1" id="system_loop_tail_v1_28" name="Submission Actions Loop End" x="296" y="429">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="type" label="Type:" menu="All,Some,Any" required="true" tooltip="How many loop processes must be completed before continuing?">All</parameter>
                    <parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_junction_v1_45</task>
                </dependents>
            </task>
            <task definition_id="utilities_echo_v1" id="utilities_echo_v1_29" name="Submission Action" x="461" y="187">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="input" label="Input" menu="" required="true" tooltip="">&lt;%=@results['Submission Actions Loop Begin']['Value']%&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">utilities_echo_v1_30</task>
                </dependents>
            </task>
            <task definition_id="utilities_echo_v1" id="utilities_echo_v1_30" name="Submission Action Workflow Processes" x="595" y="176">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="input" label="Input" menu="" required="true" tooltip="">&lt;%= 
# Parse the raw processes array
raw_processes = JSON.parse(@results['Raw Workflow Processes']['output'])
# Action
action = @results['Submission Action']['output']

# Check processes
values = raw_processes.select { |value|
  /^#{action}.*/.match(value)
}.map { |value| 
  captures = /^#{action}\s-\s(.*)$/.match(value).captures
  captures[0]
}.uniq

# If no values were present, default to 'False'
values = ['False'] if values.size == 0

# return the values as json
values.to_json
%&gt;
</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">utilities_echo_v1_38</task>
                </dependents>
            </task>
            <task definition_id="system_noop_v1" id="system_noop_v1_31" name="Do Nothing" x="583" y="416">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_34</task>
                </dependents>
            </task>
            <task definition_id="system_noop_v1" id="system_noop_v1_32" name="Dedicated Workflow" x="914" y="392">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">kinetic_task_tree_find_by_name_v1_7</task>
                </dependents>
            </task>
            <task definition_id="system_noop_v1" id="system_noop_v1_33" name="Custom Workflow - Ignored" x="727" y="425">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_34</task>
                </dependents>
            </task>
            <task definition_id="system_join_v1" id="system_join_v1_34" name="Process Complete" x="514" y="525">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="type" label="Type:" menu="All,Any,Some" required="true" tooltip="How many dependents must be completed before continuing?">All</parameter>
                    <parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_loop_tail_v1_39</task>
                </dependents>
            </task>
            <task definition_id="system_noop_v1" id="system_noop_v1_35" name="Tree Does Not Exist" x="1062" y="595">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="Submitted" type="Complete" value="@results['Submission Actions Loop Begin']['Value'].to_s.downcase == 'submitted'">kinetic_task_tree_create_v1_36</task>
                    <task label="Not Submitted" type="Complete" value="@results['Submission Actions Loop Begin']['Value'].to_s.downcase != 'submitted'">kinetic_task_tree_create_v1_4</task>
                </dependents>
            </task>
            <task definition_id="kinetic_task_tree_create_v1" id="kinetic_task_tree_create_v1_36" name="Create Tree for Submitted" x="850" y="561">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="error_handling" label="Error Handling" menu="Error Message,Raise Error" required="true" tooltip="Determine what to return if an error is encountered.">Error Message</parameter>
                    <parameter id="source" label="Source" menu="" required="true" tooltip="The source for the tree you want to run.">&lt;%= @space_attributes['Task Source Name']%&gt;</parameter>
                    <parameter id="group" label="Group" menu="" required="true" tooltip="The group of the tree you want to run.">Submissions &gt; &lt;%= @kapp['Slug']%&gt; &gt; &lt;%= @form['Slug']%&gt;</parameter>
                    <parameter id="body" label="Body" menu="" required="false" tooltip="A valid xml tree definition">&lt;tree schema_version="1.0"&gt;
&lt;sourceName&gt;Kinetic Request CE&lt;/sourceName&gt;
&lt;sourceGroup&gt;Submissions &gt; services &gt; file-creation&lt;/sourceGroup&gt;
&lt;type&gt;Tree&lt;/type&gt;
&lt;status&gt;Active&lt;/status&gt;
&lt;taskTree builder_version="" schema_version="1.0" version=""&gt;
        &lt;name&gt;Submitted&lt;/name&gt;
        &lt;author/&gt;
        &lt;notes/&gt;
        &lt;lastID&gt;67&lt;/lastID&gt;
        &lt;request&gt;
            &lt;task definition_id="system_start_v1" id="start" name="Start" x="77" y="-53"&gt;
                &lt;version&gt;1&lt;/version&gt;
                &lt;configured&gt;true&lt;/configured&gt;
                &lt;defers&gt;false&lt;/defers&gt;
                &lt;deferrable&gt;false&lt;/deferrable&gt;
                &lt;visible&gt;false&lt;/visible&gt;
                &lt;parameters/&gt;
                &lt;messages/&gt;
                &lt;dependents&gt;
                    
                
            &lt;task label="" type="Complete" value=""&gt;routine_kd_update_submission_status_v2_50&lt;/task&gt;
            &lt;/dependents&gt;
            &lt;/task&gt;
            
            
            
            
            
            &lt;task definition_id="routine_kd_notification_send_using_template_v1" id="routine_kd_notification_send_using_template_v1_12" name="Notify - Submitted" x="77" y="396"&gt;
                &lt;version&gt;1&lt;/version&gt;
                &lt;configured&gt;true&lt;/configured&gt;
                &lt;defers&gt;false&lt;/defers&gt;
                &lt;deferrable&gt;true&lt;/deferrable&gt;
                &lt;visible&gt;false&lt;/visible&gt;
                &lt;parameters&gt;
                    &lt;parameter id="Recipient List" label="Recipient List" menu="" required="true" tooltip="Comma separated list of recipients (Usernames, SMTP Addresses, and/or Team Names)"&gt;&amp;lt;%= @submission['Created By']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="Notification Template Name" label="Notification Template Name" menu="" required="true" tooltip=""&gt;&amp;lt;%=@results['Notification Template - Create']['Value']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="JSON Vars" label="JSON Vars" menu="" required="false" tooltip="JSON input of miscellaneous values.  These values are used to replace placeholder content in notification messages."/&gt;
                    &lt;parameter id="System" label="System" menu="" required="false" tooltip="System to search for ID. Defaults to Request"&gt;Kinetic Request&lt;/parameter&gt;
                    &lt;parameter id="Space Slug" label="Space Slug" menu="" required="true" tooltip="Space Slug of the submission to get values for. Used to retrieve Request submissions, notification templates, users."&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="ID" label="ID" menu="" required="false" tooltip="Id of the submission to get values for, required if using those or attachments in the message"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="Admin Kapp Slug" label="Admin Kapp Slug" menu="" required="true" tooltip="Slug of this spaces admin kapp (typically admin)"&gt;&amp;lt;%= @space_attributes['Admin Kapp Slug']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="Kapp Slug Initiating Notification" label="Kapp Slug Initiating Notification" menu="" required="true" tooltip="The slug of the Kapp sending the notification (ex: catalog, queue, etc.)"&gt;&amp;lt;%= @kapp['Slug']%&amp;gt;&lt;/parameter&gt;
                &lt;/parameters&gt;
                &lt;messages&gt;
                    &lt;message type="Create"/&gt;
                    &lt;message type="Update"/&gt;
                    &lt;message type="Complete"/&gt;
                &lt;/messages&gt;
                &lt;dependents&gt;
                    
                &lt;task label="" type="Complete" value=""&gt;utilities_echo_v1_30&lt;/task&gt;
            &lt;/dependents&gt;
            &lt;/task&gt;
            &lt;task definition_id="utilities_echo_v1" id="utilities_echo_v1_13" name="END" x="957" y="572"&gt;
                &lt;version&gt;1&lt;/version&gt;
                &lt;configured&gt;true&lt;/configured&gt;
                &lt;defers&gt;false&lt;/defers&gt;
                &lt;deferrable&gt;false&lt;/deferrable&gt;
                &lt;visible&gt;false&lt;/visible&gt;
                &lt;parameters&gt;
                    &lt;parameter id="input" label="Input" menu="" required="true" tooltip=""&gt;Completed&lt;/parameter&gt;
                &lt;/parameters&gt;
                &lt;messages&gt;
                    &lt;message type="Create"/&gt;
                    &lt;message type="Update"/&gt;
                    &lt;message type="Complete"/&gt;
                &lt;/messages&gt;
                &lt;dependents/&gt;
            &lt;/task&gt;
        
        
      
        
      
        
      
        
      
        &lt;task definition_id="kinetic_request_ce_cascading_attribute_value_retrieve_v1" id="kinetic_request_ce_cascading_attribute_value_retrieve_v1_18" name="Notification Template - Create" x="77" y="283"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;false&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
        &lt;parameter id="error_handling" label="Error Handling" menu="Error Message,Raise Error" required="true" tooltip="Determine what to return if an error is encountered."&gt;Error Message&lt;/parameter&gt;
        &lt;parameter id="start_context" label="Start Context" menu="Submission,Form,Kapp,Space" required="true" tooltip="The lowest level to search. If Submission, only a Submission Id is needed"&gt;Submission&lt;/parameter&gt;
        &lt;parameter id="end_context" label="End Context" menu="Space,Kapp,Form,Submission" required="true" tooltip="The highest level to search. If Submission, only a Submission Id is needed"&gt;Space&lt;/parameter&gt;
        &lt;parameter id="prop_to_find" label="Property To Find" menu="" required="true" tooltip="The Name of the Field/Attribute to search for a match."&gt;Notification Template Name - Create&lt;/parameter&gt;
        &lt;parameter id="backup_if_none" label="Backup Value" menu="" required="false" tooltip="If no Field/Attribute value is returned, use this value"&gt;Service Submitted&lt;/parameter&gt;  
        &lt;parameter id="space_slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the space to find attribute values in."&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
        &lt;parameter id="kapp_slug" label="Kapp Slug" menu="" required="false" tooltip="The Slug of the kapp to find attribute values in."/&gt;
        &lt;parameter id="form_slug" label="Form Slug" menu="" required="false" tooltip="The Slug of the form to find attribute values in."/&gt;
        &lt;parameter id="submission_id" label="Submission Id" menu="" required="false" tooltip="The id of the submission to find values in"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
    &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;routine_kd_notification_send_using_template_v1_12&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        &lt;task definition_id="routine_kinetic_request_ce_submission_close_v1" id="routine_kinetic_request_ce_submission_close_v1_20" name="Close Submission" x="957" y="483"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
                        &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space the submission exists in"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
                        &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="Id of the submission to close"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
                    &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;utilities_echo_v1_13&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        &lt;task definition_id="kinetic_request_ce_cascading_attribute_value_retrieve_v1" id="kinetic_request_ce_cascading_attribute_value_retrieve_v1_22" name="Notification Template - Complete" x="952" y="161"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;false&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
        &lt;parameter id="error_handling" label="Error Handling" menu="Error Message,Raise Error" required="true" tooltip="Determine what to return if an error is encountered."&gt;Error Message&lt;/parameter&gt;
        &lt;parameter id="start_context" label="Start Context" menu="Submission,Form,Kapp,Space" required="true" tooltip="The lowest level to search. If Submission, only a Submission Id is needed"&gt;Submission&lt;/parameter&gt;
        &lt;parameter id="end_context" label="End Context" menu="Space,Kapp,Form,Submission" required="true" tooltip="The highest level to search. If Submission, only a Submission Id is needed"&gt;Space&lt;/parameter&gt;
        &lt;parameter id="prop_to_find" label="Property To Find" menu="" required="true" tooltip="The Name of the Field/Attribute to search for a match."&gt;Notification Template Name - Complete&lt;/parameter&gt;
        &lt;parameter id="backup_if_none" label="Backup Value" menu="" required="false" tooltip="If no Field/Attribute value is returned, use this value"&gt;Service Completed&lt;/parameter&gt;  
        &lt;parameter id="space_slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the space to find attribute values in."&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
        &lt;parameter id="kapp_slug" label="Kapp Slug" menu="" required="false" tooltip="The Slug of the kapp to find attribute values in."/&gt;
        &lt;parameter id="form_slug" label="Form Slug" menu="" required="false" tooltip="The Slug of the form to find attribute values in."/&gt;
        &lt;parameter id="submission_id" label="Submission Id" menu="" required="false" tooltip="The id of the submission to find values in"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
    &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;routine_kd_notification_send_using_template_v1_28&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        
      
        
      
        
      
        
      
        &lt;task definition_id="routine_kd_notification_send_using_template_v1" id="routine_kd_notification_send_using_template_v1_28" name="Notify - Complete" x="957" y="276"&gt;
                &lt;version&gt;1&lt;/version&gt;
                &lt;configured&gt;true&lt;/configured&gt;
                &lt;defers&gt;false&lt;/defers&gt;
                &lt;deferrable&gt;true&lt;/deferrable&gt;
                &lt;visible&gt;false&lt;/visible&gt;
                &lt;parameters&gt;
                    &lt;parameter id="Recipient List" label="Recipient List" menu="" required="true" tooltip="Comma separated list of recipients (Usernames, SMTP Addresses, and/or Team Names)"&gt;&amp;lt;%= @submission['Created By']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="Notification Template Name" label="Notification Template Name" menu="" required="true" tooltip=""&gt;&amp;lt;%=@results['Notification Template - Complete']['Value']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="JSON Vars" label="JSON Vars" menu="" required="false" tooltip="JSON input of miscellaneous values.  These values are used to replace placeholder content in notification messages."&gt;&amp;lt;%={
  "Outcome" =&amp;gt; @results['Outcome']['output']
}.to_json%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="System" label="System" menu="" required="false" tooltip="System to search for ID. Defaults to Request"&gt;Kinetic Request&lt;/parameter&gt;
                    &lt;parameter id="Space Slug" label="Space Slug" menu="" required="true" tooltip="Space Slug of the submission to get values for. Used to retrieve Request submissions, notification templates, users."&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="ID" label="ID" menu="" required="false" tooltip="Id of the submission to get values for, required if using those or attachments in the message"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="Admin Kapp Slug" label="Admin Kapp Slug" menu="" required="true" tooltip="Slug of this spaces admin kapp (typically admin)"&gt;&amp;lt;%= @space_attributes['Admin Kapp Slug']%&amp;gt;&lt;/parameter&gt;
                    &lt;parameter id="Kapp Slug Initiating Notification" label="Kapp Slug Initiating Notification" menu="" required="true" tooltip="The slug of the Kapp sending the notification (ex: catalog, queue, etc.)"&gt;&amp;lt;%= @kapp['Slug']%&amp;gt;&lt;/parameter&gt;
                &lt;/parameters&gt;
                &lt;messages&gt;
                    &lt;message type="Create"/&gt;
                    &lt;message type="Update"/&gt;
                    &lt;message type="Complete"/&gt;
                &lt;/messages&gt;
                &lt;dependents&gt;
                
            &lt;task label="" type="Complete" value=""&gt;routine_kinetic_request_ce_submission_activity_create_v1_41&lt;/task&gt;
            &lt;/dependents&gt;
            &lt;/task&gt;
      
        &lt;task definition_id="utilities_echo_v1" id="utilities_echo_v1_29" name="Outcome" x="769" y="188"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;false&lt;/deferrable&gt;
      &lt;visible&gt;true&lt;/visible&gt;
      &lt;parameters&gt;
        &lt;parameter id="input" label="Input" menu="" required="true" tooltip=""&gt;&amp;lt;%= outcome = "Completed"
if @results.has_key?('Status - Cancelled')
  outcome = "Cancelled"
elsif @results.has_key?('Status - Denied')
  outcome = "Denied"
end
outcome%&amp;gt;&lt;/parameter&gt;
    &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;kinetic_request_ce_cascading_attribute_value_retrieve_v1_22&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="utilities_echo_v1" id="utilities_echo_v1_30" name="Summary" x="77" y="484"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;false&lt;/deferrable&gt;
      &lt;visible&gt;true&lt;/visible&gt;
      &lt;parameters&gt;
        &lt;parameter id="input" label="Input" menu="" required="true" tooltip=""&gt;&amp;lt;%= "#{@form['Name']} has been requested by #{@submission['Created By']}" %&amp;gt;&lt;/parameter&gt;
    &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                
            
            &lt;task type="Complete" label="" value=""&gt;routine_kinetic_request_ce_cascading_attribute_retrieve_v1_60&lt;/task&gt;&lt;task type="Complete" label="" value=""&gt;routine_kd_build_details_string_v2_52&lt;/task&gt;&lt;task type="Complete" label="" value=""&gt;routine_kinetic_request_ce_cascading_attribute_retrieve_v1_63&lt;/task&gt;&lt;task type="Complete" label="" value=""&gt;routine_kinetic_request_ce_cascading_attribute_retrieve_v1_62&lt;/task&gt;&lt;task type="Complete" label="" value=""&gt;routine_kinetic_request_ce_cascading_attribute_retrieve_v1_65&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        
      
        
      
        
      
        &lt;task definition_id="routine_kinetic_request_ce_submission_activity_create_v1" id="routine_kinetic_request_ce_submission_activity_create_v1_35" name="Submission Submitted Activity Record" x="77" y="89"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space to create the form in"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="The Id of the Submission for which an activity record should be created"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Label" label="Label" menu="" required="false" tooltip="Label for the Submission Activity Record"&gt;Submission Received&lt;/parameter&gt;
            &lt;parameter id="Description" label="Description" menu="" required="false" tooltip="Description for the Submission Activity Record"&gt;Your Request Was Successfully Submitted&lt;/parameter&gt;
            &lt;parameter id="Type" label="Type" menu="" required="false" tooltip="Type of Submission Activity Record"&gt;Submission Submitted&lt;/parameter&gt;
            &lt;parameter id="Data" label="Data" menu="" required="false" tooltip="Data for the Submission Activity Record (used by the renderer, sometimes complex JSON objects)"&gt;&amp;lt;%={"Comments"=&amp;gt;"Your request has been successfully received"}.to_json%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                
            &lt;task label="" type="Complete" value=""&gt;routine_attach_service_level_management_v2_51&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        
      
        
      
        
      
        
      
        &lt;task definition_id="routine_kinetic_request_ce_submission_activity_create_v1" id="routine_kinetic_request_ce_submission_activity_create_v1_41" name="Submission Completed Activity Record" x="957" y="363"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="Slug of the space to create the form in"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="The Id of the Submission for which an activity record should be created"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Label" label="Label" menu="" required="false" tooltip="Label for the Submission Activity Record"&gt;Submission Complete&lt;/parameter&gt;
            &lt;parameter id="Description" label="Description" menu="" required="false" tooltip="Description for the Submission Activity Record"&gt;Your Request Was Successfully Completed&lt;/parameter&gt;
            &lt;parameter id="Type" label="Type" menu="" required="false" tooltip="Type of Submission Activity Record"&gt;Submission Completed&lt;/parameter&gt;
            &lt;parameter id="Data" label="Data" menu="" required="false" tooltip="Data for the Submission Activity Record (used by the renderer, sometimes complex JSON objects)"&gt;&amp;lt;%={"Comments"=&amp;gt;"Your request has been successfully completed"}.to_json%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;routine_kinetic_request_ce_submission_close_v1_20&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        
      
        
      
        
      
        &lt;task definition_id="system_noop_v1" id="system_noop_v1_46" name="NoOp" x="528" y="474"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;false&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters/&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
            &lt;task type="Complete" label="" value=""&gt;routine_kd_task_v2_57&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        
      
        
      
        &lt;task definition_id="routine_kd_update_submission_status_v2" id="routine_kd_update_submission_status_v2_50" name="Status - Submitted" x="77" y="-1"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="Id of the Submission that is being updated"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Status" label="Status" menu="" required="true" tooltip="Status to set the submission to. (e.g. Submitted, In Progress"&gt;Submitted&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;routine_kinetic_request_ce_submission_activity_create_v1_35&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="routine_attach_service_level_management_v2" id="routine_attach_service_level_management_v2_51" name="Attach SLA" x="77" y="220"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="Id of the Submission to monitor Service Levels on"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;kinetic_request_ce_cascading_attribute_value_retrieve_v1_18&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="routine_kd_build_details_string_v2" id="routine_kd_build_details_string_v2_52" name="Details" x="-42" y="660"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Values JSON" label="Values JSON" menu="" required="false" tooltip="A JSON Formatted String of Q/A Values"&gt;&amp;lt;%= @values.to_json %&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="false" tooltip="If Values were provided the routine will look up the submission"/&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;&lt;task type="Complete" label="" value=""&gt;system_join_v1_66&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="routine_kd_route_approval_v2" id="routine_kd_route_approval_v2_53" name="Approval" x="209" y="476"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="The Id of the originating submission"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Approver" label="Approver" menu="" required="true" tooltip="Options are &amp;quot;Manager&amp;quot;, a username, or a team name"&gt;&amp;lt;%= @form_attributes['Approver']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Summary" label="Summary" menu="" required="true" tooltip="A summary of what is being approved"&gt;&amp;lt;%=@results['Summary']['output']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Details" label="Details" menu="" required="true" tooltip="A description of what is being approved "&gt;&amp;lt;%=@results['Details']['LIST']%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="Approved" type="Complete" value="@results['Approval']['Decision'] != &amp;quot;Denied&amp;quot;"&gt;system_noop_v1_46&lt;/task&gt;
                &lt;task label="Denied" type="Complete" value="@results['Approval']['Decision'] == &amp;quot;Denied&amp;quot;"&gt;routine_kd_update_submission_status_v2_54&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="routine_kd_update_submission_status_v2" id="routine_kd_update_submission_status_v2_54" name="Status - Approval - Denied" x="209" y="185"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="Id of the Submission that is being updated"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Status" label="Status" menu="" required="true" tooltip="Status to set the submission to. (e.g. Submitted, In Progress"&gt;Denied&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;utilities_echo_v1_29&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        
      
        &lt;task definition_id="routine_kd_task_v2" id="routine_kd_task_v2_57" name="Create Task" x="649" y="476"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="Id of the parent submission"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Summary" label="Summary" menu="" required="true" tooltip="A summary of what is to be worked on "&gt;&amp;lt;%=@results['Summary']['output']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Details" label="Details" menu="" required="true" tooltip="A description of what is to be worked on "&gt;&amp;lt;%=@results['Details']['LIST']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Task Form Slug" label="Task Form Slug" menu="" required="true" tooltip="Slug of the form the task is created for"&gt;&amp;lt;%=@results['Task Form Slug']['Value']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Assignee Team" label="Assignee Team" menu="" required="true" tooltip="Name of the team to assign work to (ex. &amp;quot;Test::Test::Test&amp;quot;)"&gt;&amp;lt;%=@results['Assigned Team']['Value']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Assignee Id" label="Assignee Id" menu="" required="false" tooltip="Id of the person the task will be assigned to"&gt;&amp;lt;%=@results['Assigned Individual']['Value']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Days Due" label="Days Due" menu="" required="true" tooltip="Number of days from now the task is to be completed by"&gt;&amp;lt;%=@results['Days Due']['Value'].to_f%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;system_join_v1_59&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="routine_kd_update_submission_status_v2" id="routine_kd_update_submission_status_v2_58" name="Status - Completed" x="781" y="314"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="false" tooltip="The Slug of the Space this submission belongs to"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="true" tooltip="Id of the Submission that is being updated"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Status" label="Status" menu="" required="true" tooltip="Status to set the submission to. (e.g. Submitted, In Progress"&gt;Complete&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;utilities_echo_v1_29&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="system_join_v1" id="system_join_v1_59" name="Join" x="781" y="473"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;false&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
        &lt;parameter id="type" label="Type:" menu="All,Any,Some" required="true" tooltip="How many dependents must be completed before continuing?"&gt;All&lt;/parameter&gt;
        &lt;parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"/&gt;
    &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;
                &lt;task label="" type="Complete" value=""&gt;routine_kd_update_submission_status_v2_58&lt;/task&gt;
            &lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1" id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1_60" name="Assigned Team" x="137" y="606"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="true" tooltip="Slug of the space to create the submission in"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Kapp Slug" label="Kapp Slug" menu="" required="false" tooltip="Slug of the kapp to create the submission in"&gt;&amp;lt;%= @kapp['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Form Slug" label="Form Slug" menu="" required="false" tooltip="Slug of the form to create the submission in"&gt;&amp;lt;%= @form['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Start Context" label="Start Context" menu="" required="true" tooltip="Lowest level to search for attribute"&gt;Submission&lt;/parameter&gt;
            &lt;parameter id="End Context" label="End Context" menu="" required="true" tooltip="Highest Level to search for attribute"&gt;Space&lt;/parameter&gt;
            &lt;parameter id="Property to Find" label="Property to Find" menu="" required="true" tooltip="Name of the attribute to retrieve"&gt;Task Assignee Team&lt;/parameter&gt;
            &lt;parameter id="Backup Value" label="Backup Value" menu="" required="false" tooltip="If no value is found, what to use"&gt;Default&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="false" tooltip="Submission Id, only needed if searching for submission level"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;&lt;task type="Complete" label="" value=""&gt;system_join_v1_66&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        &lt;task definition_id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1" id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1_62" name="Assigned Individual" x="86" y="555"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="true" tooltip="Slug of the space to create the submission in"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Kapp Slug" label="Kapp Slug" menu="" required="false" tooltip="Slug of the kapp to create the submission in"&gt;&amp;lt;%= @kapp['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Form Slug" label="Form Slug" menu="" required="false" tooltip="Slug of the form to create the submission in"&gt;&amp;lt;%= @form['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Start Context" label="Start Context" menu="" required="true" tooltip="Lowest level to search for attribute"&gt;Submission&lt;/parameter&gt;
            &lt;parameter id="End Context" label="End Context" menu="" required="true" tooltip="Highest Level to search for attribute"&gt;Kapp&lt;/parameter&gt;
            &lt;parameter id="Property to Find" label="Property to Find" menu="" required="true" tooltip="Name of the attribute to retrieve"&gt;Task Assignee Individual&lt;/parameter&gt;
            &lt;parameter id="Backup Value" label="Backup Value" menu="" required="false" tooltip="If no value is found, what to use"&gt; &lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="false" tooltip="Submission Id, only needed if searching for submission level"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;&lt;task type="Complete" label="" value=""&gt;system_join_v1_66&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task definition_id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1" id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1_63" name="Task Form Slug" x="14" y="594"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="true" tooltip="Slug of the space to create the submission in"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Kapp Slug" label="Kapp Slug" menu="" required="false" tooltip="Slug of the kapp to create the submission in"&gt;&amp;lt;%= @kapp['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Form Slug" label="Form Slug" menu="" required="false" tooltip="Slug of the form to create the submission in"&gt;&amp;lt;%= @form['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Start Context" label="Start Context" menu="" required="true" tooltip="Lowest level to search for attribute"&gt;Submission&lt;/parameter&gt;
            &lt;parameter id="End Context" label="End Context" menu="" required="true" tooltip="Highest Level to search for attribute"&gt;Space&lt;/parameter&gt;
            &lt;parameter id="Property to Find" label="Property to Find" menu="" required="true" tooltip="Name of the attribute to retrieve"&gt;Task Form Slug&lt;/parameter&gt;
            &lt;parameter id="Backup Value" label="Backup Value" menu="" required="false" tooltip="If no value is found, what to use"&gt;work-order&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="false" tooltip="Submission Id, only needed if searching for submission level"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;&lt;task type="Complete" label="" value=""&gt;system_join_v1_66&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      
        
      
        &lt;task definition_id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1" id="routine_kinetic_request_ce_cascading_attribute_retrieve_v1_65" name="Days Due" x="198" y="661"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;true&lt;/defers&gt;
      &lt;deferrable&gt;true&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
            &lt;parameter id="Space Slug" label="Space Slug" menu="" required="true" tooltip="Slug of the space to create the submission in"&gt;&amp;lt;%= @space['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Kapp Slug" label="Kapp Slug" menu="" required="false" tooltip="Slug of the kapp to create the submission in"&gt;&amp;lt;%= @kapp['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Form Slug" label="Form Slug" menu="" required="false" tooltip="Slug of the form to create the submission in"&gt;&amp;lt;%= @form['Slug']%&amp;gt;&lt;/parameter&gt;
            &lt;parameter id="Start Context" label="Start Context" menu="" required="true" tooltip="Lowest level to search for attribute"&gt;Submission&lt;/parameter&gt;
            &lt;parameter id="End Context" label="End Context" menu="" required="true" tooltip="Highest Level to search for attribute"&gt;Space&lt;/parameter&gt;
            &lt;parameter id="Property to Find" label="Property to Find" menu="" required="true" tooltip="Name of the attribute to retrieve"&gt;Service Days Due&lt;/parameter&gt;
            &lt;parameter id="Backup Value" label="Backup Value" menu="" required="false" tooltip="If no value is found, what to use"&gt;7&lt;/parameter&gt;
            &lt;parameter id="Submission Id" label="Submission Id" menu="" required="false" tooltip="Submission Id, only needed if searching for submission level"&gt;&amp;lt;%= @submission['Id']%&amp;gt;&lt;/parameter&gt;
        &lt;/parameters&gt;
            &lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;&lt;task type="Complete" label="" value=""&gt;system_join_v1_66&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task name="Lookups Complete" id="system_join_v1_66" definition_id="system_join_v1" x="66" y="734"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;false&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters&gt;
        &lt;parameter id="type" label="Type:" menu="All,Any,Some" required="true" tooltip="How many dependents must be completed before continuing?"&gt;All&lt;/parameter&gt;
        &lt;parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" required="false" tooltip="If some, how many?" menu=""/&gt;
    &lt;/parameters&gt;&lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;&lt;task type="Complete" label="" value=""&gt;system_noop_v1_67&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      
        &lt;task name="system_noop_v1_67" id="system_noop_v1_67" definition_id="system_noop_v1" x="396" y="735"&gt;
      &lt;version&gt;1&lt;/version&gt;
      &lt;configured&gt;true&lt;/configured&gt;
      &lt;defers&gt;false&lt;/defers&gt;
      &lt;deferrable&gt;false&lt;/deferrable&gt;
      &lt;visible&gt;false&lt;/visible&gt;
      &lt;parameters/&gt;&lt;messages&gt;
        &lt;message type="Create"/&gt;
        &lt;message type="Update"/&gt;
        &lt;message type="Complete"/&gt;
      &lt;/messages&gt;
      &lt;dependents&gt;&lt;task type="Complete" label="No Approval" value="@form_attributes['Approver'].to_s.empty? || @form_attributes['Approver'] == &amp;quot;none&amp;quot;"&gt;system_noop_v1_46&lt;/task&gt;&lt;task type="Complete" label="Approval Required" value="!@form_attributes['Approver'].to_s.empty? &amp;amp;&amp;amp; @form_attributes['Approver'] != &amp;quot;none&amp;quot;"&gt;routine_kd_route_approval_v2_53&lt;/task&gt;&lt;/dependents&gt;
    &lt;/task&gt;
      &lt;/request&gt;
    &lt;/taskTree&gt;&lt;/tree&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_22</task>
                </dependents>
            </task>
            <task definition_id="system_loop_head_v1" id="system_loop_head_v1_37" name="Action Processes Loop Begin" x="730" y="288">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="data_source" label="Data Source:" menu="" required="true" tooltip="The source that contains the data to use to create each task in the loop.">&lt;%=@results['Submission Action Processes']['output']%&gt;</parameter>
                    <parameter id="loop_path" label="Loop Path:" menu="" required="true" tooltip="The XPath statement to indicate what data records to process.">/processes/process</parameter>
                    <parameter id="var_name" label="Variable Name:" menu="" required="false" tooltip="The local variable name used to represent the data used in loop tasks."></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="No Workflow" type="Complete" value="JSON.parse(@results['Submission Action Workflow Processes']['output']).inject(false) { |result, value| &#10;  result || ['no', 'false'].include?(value.to_s.strip.downcase)&#10;}">system_noop_v1_31</task>
                    <task label="Custom Workflow" type="Complete" value="JSON.parse(@results['Submission Action Workflow Processes']['output']).reject { |value| &#10;  ['no', 'false', 'yes', 'true'].include?(value.to_s.strip.downcase)&#10;}.size &gt; 0">system_noop_v1_33</task>
                    <task label="Dedicated Workflow" type="Complete" value="JSON.parse(@results['Submission Action Workflow Processes']['output']).inject(false) { |result, value| &#10;  result || ['yes', 'true'].include?(value.to_s.strip.downcase)&#10;}">system_noop_v1_32</task>
                    <task label="" type="Complete" value="">system_loop_tail_v1_39</task>
                </dependents>
            </task>
            <task definition_id="utilities_echo_v1" id="utilities_echo_v1_38" name="Submission Action Processes" x="726" y="184">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>true</visible>
                <parameters>
                    <parameter id="input" label="Input" menu="" required="true" tooltip="">&lt;%
xml = "&lt;processes&gt;"
JSON.parse(@results['Submission Action Workflow Processes']['output']).each { |process|
  xml += "&lt;process&gt;#{process}&lt;/process&gt;"
}
xml += "&lt;/processes&gt;"
%&gt;&lt;%= xml %&gt;</parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_loop_head_v1_37</task>
                </dependents>
            </task>
            <task definition_id="system_loop_tail_v1" id="system_loop_tail_v1_39" name="Action Processes Loop End" x="451" y="428">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters>
                    <parameter id="type" label="Type:" menu="All,Some,Any" required="true" tooltip="How many loop processes must be completed before continuing?">All</parameter>
                    <parameter dependsOnId="type" dependsOnValue="Some" id="number" label="Number:" menu="" required="false" tooltip="If some, how many?"></parameter>
                </parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_loop_tail_v1_28</task>
                </dependents>
            </task>
            <task definition_id="system_noop_v1" id="system_noop_v1_42" name="Tree Exists" x="850" y="496">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_join_v1_22</task>
                </dependents>
            </task>
            <task definition_id="system_junction_v1" id="system_junction_v1_45" name="END" x="110" y="448">
                <version>1</version>
                <configured>true</configured>
                <defers>false</defers>
                <deferrable>false</deferrable>
                <visible>false</visible>
                <parameters></parameters>
                <messages>
                    <message type="Create"></message>
                    <message type="Update"></message>
                    <message type="Complete"></message>
                </messages>
                <dependents>
                    <task label="" type="Complete" value="">system_noop_v1_24</task>
                </dependents>
            </task>
        </request>
    </taskTree>
</tree>